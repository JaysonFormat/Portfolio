<!doctype html>
<html>
    <head>
                <title>Layer 3 Switch Inter-VLAN with DHCP and NAT - JAYSON LAURENCE GALICIA</title>

            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            
            <link rel="canonical" href="https://jgaliciaIT.github.io/inter-vlan/">
            

            
                <link  rel="icon" type="image/x-icon" href="../assets/img/favicon.ico">
            
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                        <script>hljs.initHighlightingOnLoad();</script>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="../assets/css/main.min.css">
                <script src="../search/main.js"></script>

            
                
                    
                     <style>:root {--title: var(--color-black);}</style> 
                     <style>:root {--primary: var(--color-black);}</style> 
                    
                
            
    </head>

    <body>
        <div class="container py-3">
            <header>
                    <!-- block header -->
<nav class="navbar navbar-expand-xl border-bottom">
    <div class="container-fluid">
        

        
            <span class="normal fs-4 title-color site-name" id="component-site-name" style="text-transform: uppercase;">JAYSON LAURENCE GALICIA</span>
        

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
            aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
            <ul class="navbar-nav">

                <!-- block menu -->
                <li class="nav-item">
                    <!-- block menu -->
    
        <li class="nav-item" id="component-menu">
            <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="..">[Home]</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class=" active 
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[Projects]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../lab2/" class="dropdown-item text-decoration-none ">Network Design with Integrated Firewall Solutions</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="./" class="dropdown-item text-decoration-none  active ">Layer 3 Switch Inter-VLAN with DHCP and NAT</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../lab3/" class="dropdown-item text-decoration-none ">Window Server Active Directory Implementation</a>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[Certifications]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../certs/" class="dropdown-item text-decoration-none ">IT Certifications</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../training/" class="dropdown-item text-decoration-none ">Training Certifications</a>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../tools/">[Tools]</a>
                        </li>
            </ul>
        </li>
<!-- endblock -->
                </li>
                <!-- endblock -->

                <!-- block search -->
                <li class="nav-item">
                    <a class="collapsed" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                        <div class="md-search-icon">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </div>
                    </a>
                </li>
                <!--  endblock -->

                <!-- block source -->
                <li class="nav-item">
                    
                        
                            <!-- block source -->
<div class="md-source source-detail">
  <div class="md-source-repo-icon">
    <i class="fa fa-github-alt" aria-hidden="true"></i>
  </div>

  <div class="md-source-repo-url">
    <a href="https://github.com/JaysonFormat/Laboratory" class="md-source">
      JaysonFormat/Laboratory
    </a>

    <ul class="md-source-repo-text">
      <li>
        <i class="fa fa-tag" aria-hidden="true"></i>
        <img alt="GitHub tag (latest by date)"
          src="https://img.shields.io/github/v/tag/JaysonFormat/Laboratory?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-star" aria-hidden="true"></i>
        <img alt="GitHub Repo stars"
          src="https://img.shields.io/github/stars/JaysonFormat/Laboratory?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-code-fork" aria-hidden="true"></i>
        <img alt="GitHub forks"
          src="https://img.shields.io/github/forks/JaysonFormat/Laboratory?color=white&label=%20&style=flat-square">
      </li>
    </ul>
  </div>

</div>
<!--  endblock -->
                        
                    
                </li>
                <!--  endblock -->
            </ul>
        </div>
    </div>
</nav>
<!--  endblock -->
            </header>

            <main><!-- block search -->
<div class="collapse" id="collapseExample">
    <div role="search" class="search-box">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" class="search-query"
            placeholder="Search docs" title="Type search term here" />
        </form>
    </div>
</div>
<!-- endblock -->
                    <!-- block content -->
<section class="container post">
    <article>
        <header>
            
                <h1 class="normal title" id="component-title">Layer 3 Switch Inter-VLAN with DHCP and NAT</h1>
            
        </header>
        <p><p><img src="/images/photo1.PNG" width="950"></p>
<h4 id="configuring-core1-l3-switch">Configuring Core1 (L3 Switch)</h4>
<p>If you prefer not to configure manually, I've saved the startup config on my GitHub page. Click the GitHub link at the top right.</p>
<p>On Core1, set the hostname to 'Core1', create the necessary VLANs 10, 20, 30, and assign G1/1, G1/2, and G1/3 to their respective VLANs based on the diagram.</p>
<pre><code>Switch&gt;enable
Switch#config terminal
Enter configuration commands, one per line.  End with CNTL/Z.
Switch(config)#hostname Core1
Core1(config)#
Core1(config)#vlan 10
Core1(config-vlan)#vlan 20
Core1(config-vlan)#vlan 30
Core1(config-vlan)#
</code></pre>
<p>Now that the VLANs are created, type the command 'show vlan brief' to check the necessary VLANs</p>
<pre><code>Core1(config-vlan)#
Core1(config-vlan)#end
Core1#show vlan brief
VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Gi0/3, Gi1/0, Gi1/1, Gi1/2
                                                Gi1/3, Gi2/0, Gi2/1, Gi2/2
                                                Gi2/3, Gi3/0, Gi3/1, Gi3/2
                                                Gi3/3
10   VLAN0010                         active
20   VLAN0020                         active
30   VLAN0030                         active
1002 fddi-default                     act/unsup
1003 token-ring-default               act/unsup
1004 fddinet-default                  act/unsup
1005 trnet-default                    act/unsup

Core1#
</code></pre>
<p>Now, create SVIs (Switched Virtual Interfaces); these will serve as the default gateways for each VLAN. Additionally, add the IP address of the DHCP Server to inform Core1 on how to redirect DHCP broadcast traffic. Use the command '<code>ip helper-address {server}</code>' and use <code>show ip interface brief</code> to verify the config.To enable routing between VLANs, execute the command '<code>ip routing</code>'.</p>
<p>Core1 Config</p>
<pre><code>    Core1#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    Core1(config)#
    Core1(config)#interface vlan10
    Core1(config-if)#ip address 172.10.10.254 255.255.255.0
    Core1(config-if)#ip helper-address
    Core1(config-if)#ip helper-address 10.0.10.1
    Core1(config-if)#no shutdown
    Core1(config-if)#
    Core1(config-if)#int vlan 20
    Core1(config-if)#ip address 172.20.20.254 255.255.255.0
    Core1(config-if)#ip helper-address 10.0.10.1
    Core1(config-if)#no shutdown
    Core1(config-if)#
    Core1(config-if)#int vlan 30
    Core1(config-if)#ip address 172.30.30.254 255.255.255.0
    Core1(config-if)#ip helper-address 10.0.10.1
    Core1(config-if)#no shutdown
    Core1(config-if)#
    Core1(config-if)#end
    Core1#
    Core1#configure terminal
    Enter configuration commands, one per line.  End with CNTL/Z.
    Core1(config)#
    Core1(config)#ip routing
    Core1(config)#
</code></pre>
<p>Core1 Verification</p>
<pre><code>    Core1#show ip interface brief
    Interface              IP-Address      OK? Method Status                Protocol
    GigabitEthernet0/2     unassigned      YES unset  up                    up
    GigabitEthernet0/3     unassigned      YES unset  down                  down
    GigabitEthernet0/0     unassigned      YES unset  down                  down
    GigabitEthernet0/1     unassigned      YES unset  down                  down
    GigabitEthernet1/0     unassigned      YES unset  down                  down
    GigabitEthernet1/1     unassigned      YES unset  up                    up
    GigabitEthernet1/2     unassigned      YES unset  up                    up
    GigabitEthernet1/3     unassigned      YES unset  up                    up
    GigabitEthernet2/0     unassigned      YES unset  down                  down
    GigabitEthernet2/1     unassigned      YES unset  down                  down
    GigabitEthernet2/2     unassigned      YES unset  down                  down
    GigabitEthernet2/3     unassigned      YES unset  down                  down
    GigabitEthernet3/0     unassigned      YES unset  down                  down
    GigabitEthernet3/1     unassigned      YES unset  down                  down
    GigabitEthernet3/2     unassigned      YES unset  down                  down
    GigabitEthernet3/3     unassigned      YES unset  down                  down
    Vlan10                 172.10.10.254   YES NVRAM  up                    up
    Vlan20                 172.20.20.254   YES NVRAM  up                    up
    Vlan30                 172.30.30.254   YES NVRAM  up                    up
</code></pre>
<p>Now, we create routed ports connected to the server and router. <code>The network between the server and Core1 is 10.0.10.0/30, and between R1 and Core1 is 10.0.11.0/30</code>.</p>
<pre><code>Core1(config)#
Core1(config)#interface g0/0
Core1(config-if)#no switchport
Core1(config-if)#
Core1(config-if)#ip address 10.0.11.2 255.255.255.252
Core1(config-if)#no shutdown
Core1(config-if)#
Core1(config-if)#interface g0/1
Core1(config-if)#no switchport
Core1(config-if)#ip address 10.0.10.2 255.255.255.252
Core1(config-if)#no shutdown
Core1(config-if)#end
Core1#
</code></pre>
<pre><code>Core1#
Core1#show ip interface brief | exc unass
Interface              IP-Address      OK? Method Status                Protocol
GigabitEthernet0/0     10.0.11.2       YES NVRAM  up                    up
GigabitEthernet0/1     10.0.10.2       YES NVRAM  up                    up
Vlan10                 172.10.10.254   YES NVRAM  up                    up
Vlan20                 172.20.20.254   YES NVRAM  up                    up
Vlan30                 172.30.30.254   YES NVRAM  up                    up

Core1#
</code></pre>
<p>Now, configure a trunk to the neighboring switch, Access1 and Acess2, allowing only the necessary VLANs and disabling DTP.</p>
<pre><code>If the switch supports both ISL and 802.1Q, use the command switchport trunk encapsulation dot1q.
</code></pre>
<pre><code>Core1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
Core1(config)#
Core1(config)#int range g0/2 - 3
Core1(config-if-range)#
Core1(config-if-range)#switchport trunk encapsulation dot1q
Core1(config-if-range)#switchport mode trunk
Core1(config-if-range)#
Core1(config-if-range)#switchport trunk allowed vlan 10,20,30
Core1(config-if-range)#switchport nonegotiate
Core1(config-if-range)#end
Core1#
</code></pre>
<pre><code>Core1#
Core1#show interface trunk

Port        Mode             Encapsulation  Status        Native vlan
Gi0/2       on               802.1q         trunking      1
Gi0/3       on               802.1q         trunking      1

Port        Vlans allowed on trunk
Gi0/2       10,20,30
Gi0/3       10,20,30

Port        Vlans allowed and active in management domain
Gi0/2       10,20,30
Gi0/3       10,20,30

Port        Vlans in spanning tree forwarding state and not pruned
Gi0/2       10,20,30
Gi0/3       10,20,30
Core1#
</code></pre>
<h4 id="configuring-access1-l2-switch">Configuring Access1 (L2 Switch)</h4>
<p>Now, add the interfaces to their necessary VLANs on Access1 and configure a trunk to the neighboring switch, allowing only the necessary VLANs and disabling DTP.</p>
<p>Access1 Configuration</p>
<pre><code>    Switch&gt;enable
    Switch#config terminal
    Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#hostname Access1
    Access1(config)#
    Access1(config)#vlan 10
    Access1(config-vlan)#vlan 20
    Access1(config-vlan)#vlan 30
    Access1(config-vlan)#
    Access1#
    Access1#conf t
    Access1(config)#
    Access1(config)#interface e1/1
    Access1(config-if)#switchport access vlan 10
    Access1(config-if)#
    Access1(config-if)#int e1/2
    Access1(config-if)#switchport access vlan 20
    Access1(config-if)#
    Access1(config-if)#int e1/3
    Access1(config-if)#switchport access vlan 30
    Access1(config-if)#end
    Access1#
</code></pre>
<p>Access1 Configuration Part 2  </p>
<pre><code>    Access1#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    Access1(config)#
    Access1(config)#int e0/3
    Access1(config-if)#
    Access1(config-if)#switchport trunk encapsulation dot1q
    Access1(config-if)#switchport mode trunk
    Access1(config-if)#
    Access1(config-if)#switchport trunk allowed vlan 10,20,30
    Access1(config-if)#switchport nonegotiate
    Access1(config-if)#end
    Access1#
</code></pre>
<h2 id="configuring-access2-l2-switch">Configuring Access2 (L2 Switch)</h2>
<p>Now, add the interfaces to their necessary VLANs on Access2 and configure a trunk to the neighboring switch, allowing only the necessary VLANs and disabling DTP.</p>
<p>Access2 Configuration</p>
<pre><code>    Switch&gt;enable
    Switch#config terminal
    Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#hostname Access2
    Access2(config)#
    Access2(config)#vlan 10
    Access2(config-vlan)#vlan 20
    Access2(config-vlan)#vlan 30
    Access2(config-vlan)#
    Access2#
    Access2#conf t
    Access2(config)#
    Access2(config)#interface e1/1
    Access2(config-if)#switchport access vlan 10
    Access2(config-if)#
    Access2(config-if)#int e1/2
    Access2(config-if)#switchport access vlan 20
    Access2(config-if)#
    Access2(config-if)#int e1/3
    Access2(config-if)#switchport access vlan 30
    Access2(config-if)#end
    Access2#
</code></pre>
<p>Access2 Configuration Part 2  </p>
<pre><code>    Access2#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    Access2(config)#
    Access2(config)#int e0/2
    Access2(config-if)#
    Access2(config-if)#switchport trunk encapsulation dot1q
    Access2(config-if)#switchport mode trunk
    Access2(config-if)#
    Access2(config-if)#switchport trunk allowed vlan 10,20,30
    Access2(config-if)#switchport nonegotiate
    Access2(config-if)#end
    Access2#
</code></pre>
<h2 id="configuring-router-as-dhcp-server">Configuring Router as DHCP Server</h2>
<p>As for the server, instead of using a Windows server, we will use a router to perform DHCP.</p>
<p>Configure Server</p>
<pre><code>    DHCP#
    DHCP#conf t
    DHCP(config)#
    DHCP(config)#interface ethernet 0/0
    DHCP(config-if)#ip address 10.0.10.1 255.255.255.252
    DHCP(config-if)#no shutdown
    DHCP(config-if)#
</code></pre>
<p>Verification Server</p>
<pre><code>    DHCP#show ip int brief | excl unas
    Interface                  IP-Address      OK? Method Status                Protocol
    Ethernet0/0                10.0.10.1       YES manual up                    up

    DHCP#
</code></pre>
<p>When configuring the DHCP server, indicate the excluded addresses so that the server knows which addresses are excluded from leases.</p>
<pre><code>DHCP#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
DHCP(config)#ip dhcp excluded-address 172.10.10.254
DHCP(config)#ip dhcp excluded-address 172.20.20.254
DHCP(config)#ip dhcp excluded-address 172.30.30.254
DHCP(config)#
</code></pre>
<p>To ensure that PCs in different VLANs receive an IP address, create a DHCP pool that includes the range of addresses and specifies the default gateway.</p>
<p>DHCP Configuration</p>
<pre><code>    DHCP(config)#
    DHCP(config)#ip dhcp pool VLAN10
    DHCP(dhcp-config)#network 172.10.10.0 255.255.255.0
    DHCP(dhcp-config)#default-router 172.10.10.254
    DHCP(dhcp-config)#
    DHCP(dhcp-config)#ip dhcp pool VLAN20
    DHCP(dhcp-config)#network 172.20.20.0 255.255.255.0
    DHCP(dhcp-config)#default-router 172.20.20.254
    DHCP(dhcp-config)#
    DHCP(dhcp-config)#ip dhcp pool VLAN30
    DHCP(dhcp-config)#network 172.30.30.0 255.255.255.0
    DHCP(dhcp-config)#default-router 172.30.30.254
    DHCP(dhcp-config)#end
    DHCP#
</code></pre>
<p>Verification</p>
<pre><code>    DHCP#show ip dhcp pool

    Pool VLAN10 :
     Utilization mark (high/low)    : 100 / 0
     Subnet size (first/next)       : 0 / 0
     Total addresses                : 254
     Leased addresses               : 0
     Pending event                  : none
     1 subnet is currently in the pool :
     Current index        IP address range                    Leased addresses
     172.10.10.1          172.10.10.1      - 172.10.10.254     0

    Pool VLAN20 :
     Utilization mark (high/low)    : 100 / 0
     Subnet size (first/next)       : 0 / 0
     Total addresses                : 254
     Leased addresses               : 0
     Pending event                  : none
     1 subnet is currently in the pool :
     Current index        IP address range                    Leased addresses
     172.20.20.1          172.20.20.1      - 172.20.20.254     0

    Pool VLAN30 :
     Utilization mark (high/low)    : 100 / 0
     Subnet size (first/next)       : 0 / 0
     Total addresses                : 254
     Leased addresses               : 0
     Pending event                  : none
     1 subnet is currently in the pool :
     Current index        IP address range                    Leased addresses
     172.30.30.1          172.30.30.1      - 172.30.30.254     0
    DHCP#
</code></pre>
<p>Now, create a default gateway for the server so it knows what to do if it doesn't know how to forward packets.</p>
<pre><code>DHCP#conf t
DHCP(config)#ip route 0.0.0.0 0.0.0.0 10.0.10.2
DHCP(config)#
DHCP(config)#do show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is 10.0.10.2 to network 0.0.0.0

S*    0.0.0.0/0 [1/0] via 10.0.10.2
      10.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        10.0.10.0/30 is directly connected, Ethernet0/0
L        10.0.10.1/32 is directly connected, Ethernet0/0
DHCP(config)#
</code></pre>
<h2 id="connecting-pcs-to-the-internet">Connecting PCs to the Internet</h2>
<p>Configure the interfaces that are connected to the internet and Core1. FastEthernet 0/1 will use DHCP for addressing.</p>
<p>R! Configure</p>
<pre><code>    R1#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    R1(config)#interface f0/0
    R1(config-if)#ip address 10.0.11.1 255.255.255.252
    R1(config-if)#no shutdown
    R1(config-if)#
    *Nov 28 14:33:13.247: %LINK-3-UPDOWN: Interface FastEthernet0/0, changed state to up
    *Nov 28 14:33:14.247: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    R1(config-if)#int f0/1
    R1(config-if)#ip address dhcp
    R1(config-if)#no shutdown
    R1(config-if)#
    *Nov 28 14:33:44.303: %LINK-3-UPDOWN: Interface FastEthernet0/1, changed state to up
    *Nov 28 14:33:45.303: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    R1(config-if)#
    *Nov 28 14:33:52.767: %DHCP-6-ADDRESS_ASSIGN: Interface FastEthernet0/1 assigned DHCP address 192.168.1.12, mask 255.255.255.0, hostname R1

    R1(config-if)#
</code></pre>
<p>R1 Verification</p>
<pre><code>    R1#show ip int brief
    Interface                  IP-Address      OK? Method Status                Protocol
    FastEthernet0/0            10.0.11.1       YES manual up                    up
    FastEthernet0/1            192.168.1.12    YES DHCP   up                    up
    R1#
</code></pre>
<p>Any routes not found in Core1's routing table will be redirected to R1, serving as the default route.</p>
<pre><code>Core1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
Core1(config)#ip route 0.0.0.0 0.0.0.0 10.0.11.2
Core1(config)#do show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is 10.0.11.1 to network 0.0.0.0

S*    0.0.0.0/0 [1/0] via 10.0.11.1
      10.0.0.0/8 is variably subnetted, 4 subnets, 2 masks
C        10.0.10.0/30 is directly connected, GigabitEthernet0/1
L        10.0.10.2/32 is directly connected, GigabitEthernet0/1
C        10.0.11.0/30 is directly connected, GigabitEthernet0/0
L        10.0.11.2/32 is directly connected, GigabitEthernet0/0
      172.10.0.0/16 is variably subnetted, 2 subnets, 2 masks
C        172.10.10.0/24 is directly connected, Vlan10
L        172.10.10.254/32 is directly connected, Vlan10
      172.20.0.0/16 is variably subnetted, 2 subnets, 2 masks
C        172.20.20.0/24 is directly connected, Vlan20
L        172.20.20.254/32 is directly connected, Vlan20
      172.30.0.0/16 is variably subnetted, 2 subnets, 2 masks
C        172.30.30.0/24 is directly connected, Vlan30
L        172.30.30.254/32 is directly connected, Vlan30
Core1(config)#
</code></pre>
<p>In Config 1, define which interface will be the outside and inside interface using the commands '<code>ip nat inside</code>' and '<code>ip nat outside.</code>' In Config 2, use an ACL to identify traffic rather than control the traffic.</p>
<p>Configuration 1</p>
<pre><code>    R1#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    R1(config)#int f0/1
    R1(config-if)#ip nat outside
    R1(config-if)#
    R1(config-if)#int f0/0
    R1(config-if)#ip nat inside
    R1(config-if)#
    R1(config-if)#end
    R1#
</code></pre>
<p>Configuration 2</p>
<pre><code>    R1#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    R1(config)#
    R1(config)#access-list 1 permit 172.0.0.0 0.255.255.255
    R1(config)#ip nat inside source list 1 interface f0/1 overload
    R1(config)#
</code></pre>
<pre><code>In this method, we use the outside interface instead of allocating public addresses or implementing static one-to-one mapping.
</code></pre>
<p>Use a static route so that R1 knows how to route back to the NATed addresses.</p>
<p>R1 Configuration</p>
<pre><code>    R1(config)#
    R1(config)#ip route 172.10.10.0 255.255.255.0 10.0.11.2
    R1(config)#ip route 172.20.20.0 255.255.255.0 10.0.11.2
    R1(config)#ip route 172.30.30.0 255.255.255.0 10.0.11.2
    R1(config)#
    R1(config)#
</code></pre>
<p>R1 Verification</p>
<pre><code>    R1(config)#do show ip route
    Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
           D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
           N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
           E1 - OSPF external type 1, E2 - OSPF external type 2
           i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
           ia - IS-IS inter area, * - candidate default, U - per-user static route
           o - ODR, P - periodic downloaded static route

    Gateway of last resort is 192.168.1.1 to network 0.0.0.0

         172.10.0.0/24 is subnetted, 1 subnets
    S       172.10.10.0 [1/0] via 10.0.11.2
         172.20.0.0/24 is subnetted, 1 subnets
    S       172.20.20.0 [1/0] via 10.0.11.2
         172.30.0.0/24 is subnetted, 1 subnets
    S       172.30.30.0 [1/0] via 10.0.11.2
         10.0.0.0/30 is subnetted, 1 subnets
    C       10.0.11.0 is directly connected, FastEthernet0/0
    C    192.168.1.0/24 is directly connected, FastEthernet0/1
    S*   0.0.0.0/0 [254/0] via 192.168.1.1
    R1(config)#
</code></pre>
<p>In this configuration, three static routes are used, but <code>ip route 172.0.0.0 255.0.0.0 10.0.11.2</code> is also an option. Other methods, such as setting up dynamic routing, can be employed as long as they can route back to Core1.</p>
<pre><code>PC1&gt;
PC1&gt; ping 8.8.8.8
84 bytes from 8.8.8.8 icmp_seq=1 ttl=57 time=85.578 ms
84 bytes from 8.8.8.8 icmp_seq=2 ttl=57 time=41.087 ms
84 bytes from 8.8.8.8 icmp_seq=3 ttl=57 time=131.509 ms
84 bytes from 8.8.8.8 icmp_seq=4 ttl=57 time=43.668 ms
84 bytes from 8.8.8.8 icmp_seq=5 ttl=57 time=42.858 ms

PC1&gt; ping 4.2.2.2
84 bytes from 4.2.2.2 icmp_seq=1 ttl=53 time=76.136 ms
84 bytes from 4.2.2.2 icmp_seq=2 ttl=53 time=75.116 ms
84 bytes from 4.2.2.2 icmp_seq=3 ttl=53 time=70.754 ms
84 bytes from 4.2.2.2 icmp_seq=4 ttl=53 time=87.615 ms
84 bytes from 4.2.2.2 icmp_seq=5 ttl=53 time=61.782 ms
</code></pre>
<pre><code>PC5&gt; ping 8.8.8.8
84 bytes from 8.8.8.8 icmp_seq=1 ttl=57 time=50.912 ms
84 bytes from 8.8.8.8 icmp_seq=2 ttl=57 time=45.580 ms
84 bytes from 8.8.8.8 icmp_seq=3 ttl=57 time=77.687 ms
84 bytes from 8.8.8.8 icmp_seq=4 ttl=57 time=82.768 ms
84 bytes from 8.8.8.8 icmp_seq=5 ttl=57 time=54.593 ms

PC5&gt;
</code></pre></p>
    </article>
</section>
<!-- endblock -->
            </main>

            
            

            
                    <!-- block footer -->
<footer class="pt-4 my-md-5 pt-md-5 border-top" id="component-footer">
    <div class="row">
        <div class="col-12 col-md">
                <!-- block copyright -->

    <small class="d-block mb-3">
        Made with
        <a href="https://github.com/FernandoCelmer/mkdocs-simple-blog" target="_blank" rel="noopener">
            Simple Blog for MkDocs
        </a>
    </small>

<!-- endblock -->
        </div>
    </div>
</footer>
<!-- endblock -->
            
        </div>

            <script>var base_url = '..';</script>
            <script src="../assets/js/jquery-3.3.1.slim.min.js""></script>
            <script src="../assets/js/bootstrap.bundle.min.js""></script>
            <script src="../assets/js/main.min.js""></script>
                <script src="../search/main.js" defer></script>

    </body>

</html>